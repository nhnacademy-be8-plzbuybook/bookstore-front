<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>쿠폰 발급</title>
    <link rel="stylesheet" href="/css/coupon/coupon-issue.css">
    <script src="/js/coupon/coupon-member-find-modal.js"></script>
    <script src="/js/coupon/coupon-history-modal.js"></script>
</head>
<body>
<header>
    <a href="/" class="logo">📚 책사조잉 📚</a>
    <nav class="menu">
        <a href="/">홈</a>
        <a href="#">국내도서</a>
        <a href="#">외국도서</a>
        <a href="#">추천도서</a>
    </nav>
    <div class="icons">
        <a href="/logout">로그아웃</a>
    </div>
</header>
<main>
    <!-- 사이드바 -->
    <div class="sidebar">
        <div class="group active" data-section="member-management">회원 관리</div>
        <a href="/admin/books" class="group">도서 관리</a>
        <a href="/admin/selling-books" class="group">판매 도서 관리</a>
        <div class="group" data-section="coupon-management">쿠폰 관리</div>
        <div class="group" data-section="coupon-policy-management">쿠폰 정책 관리</div>
        <a href="/admin/tag" class="group">태그 관리</a>
        <div class="group" data-section="point-condition-management">포인트 조건 관리</div>
        <a href="/admin/category" class="group">카테고리 관리</a>
        <a href="/admin/coupon-register" class="group">쿠폰 제작</a>
        <a href="/admin/coupon-issue" class="group">쿠폰 발급</a>
        <a href="/admin/wrapping-papers" class="group">포장지 관리</a>
        <a href="/admin/delivery-fee-policies" class="group">배송비정책 관리</a>
        <a href="/admin/orders" class="group">주문 관리</a>
        <a href="/admin/order-product-returns" class="group">반품요청 관리</a>
        <a href = "/admin/authors" class="group" data-section="author-management">작가 관리</a>
    </div>

    <!-- 회원에게 쿠폰 발급 -->
    <h3>회원 쿠폰 발급</h3>

    <div>
        <form id="couponIssueForm" action="/admin/member-coupons" method="post">
            <label for="mcMemberId">회원 ID:</label>
            <input type="number" id="mcMemberId" name="mcMemberId" required><br>

            <label for="couponId">쿠폰 ID:</label>
            <input type="number" id="couponId" name="couponId" required><br>

            <button type="submit">발급</button>
        </form>
    </div>

    <h3>회원 쿠폰 목록</h3>
    <div>
        <button type="button" onclick="openCouponMemberModal('/admin/member-coupons?page=0&pageSize=5')">회원 쿠폰 목록 조회</button>
    </div>

    <div id="couponMemberModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeCouponMemberModal('couponMemberModal')">닫기</span>
            <div id="couponMemberModalContent"></div>
        </div>
    </div>

    <!-- 쿠폰 이력 조회 -->
    <h3>쿠폰 이력 조회</h3>
    <div>
        <label for="couponIdInput">쿠폰 ID:</label>
        <input type="number" id="couponIdInput" placeholder="쿠폰 ID를 입력하세요">
        <button type="button" onclick="searchCouponHistories()">조회하기</button>
    </div>
    <div id="couponHistoryModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeCouponHistoriesModal('couponHistoryModal')">닫기</span>
            <div id="couponHistoryModalContent"></div>
        </div>
    </div>


</main>
<script>
    const currentPath = window.location.pathname;
    const sidebarLinks = document.querySelectorAll('.sidebar .group');

    sidebarLinks.forEach(link => {
        const linkPath = link.getAttribute('href');
        if (linkPath === currentPath) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }

        link.addEventListener('click', () => {
            sidebarLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');
        });
    });
</script>
<footer>
    <p>&copy; 2025 PlzBuyBook. 모든 권리 보유.</p>
    <p><a href="https://github.com/nhnacademy-be8-plzbuybook/bookstore-shoppingmall" target="_blank">PlzBuyBook GitHub</a></p>
    <p><a href="/privacy">개인정보처리방침</a> | <a href="/terms">이용약관</a></p>
</footer>
</body>
</html>